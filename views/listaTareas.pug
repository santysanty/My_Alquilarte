extends layoutAdmin
block contenido
  .container.mt-5
    h1 Lista de Tareas
    a(href="/tareas/nueva", class="btn btn-primary mb-3") Crear Nueva Tarea

    // Formulario de Filtros
    form(method="GET", action="/tareas", class="mb-4")
      .row.g-3.align-items-end
        .col-md-3
          label(for="estado", class="form-label") Estado:
          select(name="estado", id="estado", class="form-select")
            option(value="todos", selected=currentEstado === 'todos' ? 'selected' : false) Todos
            option(value="pendiente", selected=currentEstado === 'pendiente' ? 'selected' : false) Pendiente
            option(value="en progreso", selected=currentEstado === 'en progreso' ? 'selected' : false) En Progreso
            option(value="completada", selected=currentEstado === 'completada' ? 'selected' : false) Completada
        .col-md-3
          label(for="prioridad", class="form-label") Prioridad:
          select(name="prioridad", id="prioridad", class="form-select")
            option(value="todas", selected=currentPrioridad === 'todas' ? 'selected' : false) Todas
            option(value="baja", selected=currentPrioridad === 'baja' ? 'selected' : false) Baja
            option(value="media", selected=currentPrioridad === 'media' ? 'selected' : false) Media
            option(value="alta", selected=currentPrioridad === 'alta' ? 'selected' : false) Alta
        .col-md-3
          label(for="area", class="form-label") Área:
          select(name="area", id="area", class="form-select")
            option(value="todas", selected=currentArea === 'todas' ? 'selected' : false) Todas
            each areaOpt in ['Ventas', 'Administración', 'Contabilidad', 'Mantenimiento']
              option(value=areaOpt, selected=currentArea === areaOpt.toLowerCase() ? 'selected' : false)= areaOpt
        .col-md-3
          label(for="busqueda", class="form-label") Buscar:
          input(type="text", name="busqueda", id="busqueda", class="form-control", value=currentBusqueda, placeholder="Título o descripción")
        .col-12.text-end
          button(type="submit", class="btn btn-info me-2") Filtrar
          a(href="/tareas", class="btn btn-outline-secondary") Limpiar Filtros

    if tareas.length > 0
      table.table.table-striped.table-hover
        thead
          tr
            th ID
            th Título
            th Descripción
            th Área
            th Estado
            th Prioridad
            th Fecha
            th Acciones
        tbody
          each tarea in tareas
            tr
              td= tarea.tareaID
              td= tarea.titulo
              td= tarea.descripcion
              td= tarea.area
              td= tarea.estado
              td= tarea.prioridad
              td= tarea.fecha
              td
                a(href=`/tareas/${tarea.tareaID}/editar`, class="btn btn-sm btn-warning me-2") Editar
                form(action=`/tareas/${tarea.tareaID}/eliminar?_method=DELETE`, method="POST", style="display:inline;")
                  button(type="submit", class="btn btn-sm btn-danger", onclick="return confirm('¿Estás seguro de eliminar esta tarea?');") Eliminar
    else
      p No hay tareas registradas que coincidan con los criterios.